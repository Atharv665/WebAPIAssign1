# Assignment 1

You will only need one file, ie, your node module, for this assignment.

In this readme file, describe how to use your node module. It could be similar to **app.js** from Lab2, where you call some functions in your node module and display the output. Describe how to setup your node module, if any. Describe how to call the functions, what parameters required and so on.

You can press **Ctrl+Shift+V** in this file in Visual Studio Code to see a live preview of the readme file.

For some tips in formatting text in readme file, refer to https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax

# AtharvsOdyssey

- [Overview](#overview-back)
- [Setup](#setup)
- [Dependencies](#dependencies)
- [Booking-Module](#booking-module)
- [Comments-Module](#comments-module)
- [Destination-Module](#destination-module)
- [User-Module](#user-module)
- [Menus](#menus)
- [User Permissions System](#user-permissions-system)
- [Login System](#login-system)
- [Checks](#checks)
- [Code Organization](#code-organization)
- [References](#references)

## Overview

**[⬆️Back to Top](#atharvsodyssey)**

This node module is a tour agency users to book tours for popular destinations in various countries.
Please do clone the project and run it because it is a menu-driven application which uses a external npm package for the menu logic.Being a menu driven application, this means there is no need to tell users about how to call functions and display output as this is automatically done in the terminal itself.There is a login system in place to restrict some function calls to admins or users.

**Note**<br>
All functions that have been used for array operations are seperated into individual files,namely the user,comments,bookings and destination files for viewing.Viewing the odyssey.js may not be needed unless you want to see the menu/authentication logic.

## Setup

**[⬆️Back to Top](#atharvsodyssey)**

To setup the node module, please run `npm install` in your terminal which will automatically install the dependencies needed for this module.<br>

After that, run `node odyssey.js`.

**Note**<br>
Before running the application, make sure you have created a user or admin json object for yourself in the user.js file, in the users array.This will be needed for login as the module will authenricate you with your username and password before showing you the menus you can access.Feel free to use the already created users to test too. I have added 2 examples of users to show what information is needed for each user.

## Dependencies

**[⬆️Back to Top](#atharvsodyssey)**

- **chalk**: For colorful terminal output.
- **inquirer**: For creating interactive terminal menus.
- **sentiment**: For performing sentiment analysis on user comments.

## Booking Module

**[⬆️Back to Top](#atharvsodyssey)**

- **`addBooking(destinationId)`**: Adds a new booking for the logged-in user for a specified destination. Prevents duplicate bookings for the same destination by the same username.
- **`getAllBookings()`**: Returns all bookings made in the system.
- **`getBookingsByUsername(username)`**: Returns all bookings made by a specific user. If none are found,returns error message
- **`cancelBooking(id)`**: Removes a booking by its id from the bookings array.
- **`calculateRevenue()`**: Calculates the total revenue generated by summing the prices of all destinations associated with bookings by using the reduce operator

## Comments Module

**[⬆️Back to Top](#atharvsodyssey)**

Please check out **[Sentiment Package](#sentiment-package)** to understand more about comments' functions.

- **`addComment(destinationId, commentText)`**: Adds a comment for a specific destination by the logged-in user. Verifies if the destination exists before adding the comment.
- **`getAllComments()`**: Returns all comments in the system.
- **`sentimentAnalysis()`**: Analyzes the sentiment of all comments and returns an array with sentiment scores for each comment.
- **`sentimentAnalysisSort()`**: Sorts all comments based on their sentiment score, from lowest (most negative) to highest (most positive).
- **`calculateAllScore()`**: Aggregates the sentiment scores into positive and negative totals and provides feedback based on the results.

## Destination Module

**[⬆️Back to Top](#atharvsodyssey)**

- **`addDestination(name, country, description, rating, price, likes)`**: Adds a new destination to the system.
- **`getDestinationById(id)`**: Retrieves a destination by its ID. Returns an error message if not found.
- **`getAllDestinations()`**: Returns all destinations in the system.
- **`getDestinationsByName(name)`**: Searches for destinations by name. Supports partial matches.
- **`getDestinationsByCountry(country)`**: Returns all destinations in a specified country.
- **`updateDestination(id, name, country, description)`**: Updates the details of a specific destination by its ID.
- **`deleteDestination(id)`**: Deletes a destination by its ID.
- **`sortDestinations(order)`**: Sorts destinations based on their rating. Supports ascending (`asc`) or descending (`desc`) order.

## User Module

**[⬆️Back to Top](#atharvsodyssey)**

- **`getCurrentUser()`**: Returns the currently logged-in user's username at runtime.
- **`getRole()`**: Retrieves the role of the current user (`admin` or `user`) at runtime. Returns an error if no user is logged in.
- **`loginUser(username, password)`**: Authenticates a user and sets them as the current logged-in user at runtime.
- **`addUser(username, password, phoneNumber, role)`**: Adds a new user to the system.
- **`getUserById(id)`**: Finds and returns a user by their ID.
- **`getAllUsers()`**: Returns all users in the system.
- **`getUsersByUsername(username)`**: Searches for users by their username. Supports partial matches.
- **`getUsersByJoinDate(dateJoined)`**: Returns all users who joined on a specific date.

## Menus

**[⬆️Back to Top](#atharvsodyssey)**

The following menus are accessible to both type of users.<br>

- **Destinations Menu**:Operations related to destinations that users can book for tours<br>
- **Users Menu** :Operations related to users that are present in the application<br>
- **Bookings Menu**:Operations related to bookings that have been made by the user<br>
- **Comments Menu** :Operations related to comments that have been made by the users using the application for destinations

## Sentiment package

**[⬆️Back to Top](#atharvsodyssey)**

The sentiment package works by analysing the words in the user's comment and identifying positive or negative words.Based on the number of positive or negative words, a score is given to each comment.The higher the score, the more positive the comment.<br>

The calculate

Some fake comments have been pre-added into the comments array to test out the sentiment anaylysis comment functions.Feel free to add your own comment and also test it out.The more foul or lovely your comment, the more accurate the scores.

## User Permissions System

**[⬆️Back to Top](#atharvsodyssey)**

Some functions for some modules are displayed based on the role of the user, for example only user with role types of admin will be able to see and use the `addUser()` function.The role of the user is retrieved from the `getRole()` function in the user.js file.After the role is assigned to a variable in the main file at runtime, a check happens for every menu to check whether the user is an admin or not.If the user is an admin, the `.unshift` method is called on the all the choices arrays to push admin-only options to the menu.

## Login System

**[⬆️Back to Top](#atharvsodyssey)**

The login authentication works by checking whether the user with the username and password exists in the users array.If not present, the program exits with a message and if present the username of the user is saved in a temporary state at runtime.This is used for making bookings.

## Checks

**[⬆️Back to Top](#atharvsodyssey)**

For data integrity,various checks have been put in place querying arrays from other modules. For example, checking if the destination exists before inserting a booking, the method `DestinationModule.getDestinationByName(destinationName)` is called within the booking module. This ensures that only valid destinations are used for bookings.

## Code Organization

**[⬆️Back to Top](#atharvsodyssey)**

Functions for each array have been seperated into seperate files for ease of viewing.In the main file, the inquirer library handles the menu part of the application.For example, the `login()` function is first called to login the user, and if passed the `menu()` function is called to display the menu.

## References

**[⬆️Back to Top](#atharvsodyssey)**

https://stackoverflow.com/questions/23593052/format-javascript-date-as-yyyy-mm-dd<br>

https://www.youtube.com/watch?v=Qf5EXOyGRxw<br>

https://stackoverflow.com/questions/8702474/updating-a-json-object-using-javascript<br>

https://www.shecodes.io/athena/11178-how-to-delete-an-index-inside-an-array-in-javascript#:~:text=To%20delete%20an%20index%20inside%20an%20array%20in%20JavaScript%2C%20you,use%20the%20splice()%20method.&text=In%20the%20example%20code%2C%20splice,number%20of%20elements%20to%20remove.<br>

https://stackoverflow.com/questions/42499698/sorting-an-array-of-objects-based-on-a-property-value-int<br>

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift<br>

https://www.w3schools.com/howto/howto_js_spread_operator.asp<br>

https://stackoverflow.com/questions/1230233/how-to-find-the-sum-of-an-array-of-numbers<br>

https://stackoverflow.com/questions/4652104/convert-a-negative-number-to-a-positive-one-in-javascript<br>
